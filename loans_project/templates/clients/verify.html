{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Verify your identity with Nexus Financing">
<link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">
<title>Nexus Financing | ID Verification</title>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" crossorigin="anonymous"/>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<style>
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #fefefe, #ffe5e5);
}

.card {
    max-width: 450px;
    width: 100%;
    border-radius: 20px;
    padding: 2.5rem;
    margin: 2rem auto;
    background: #fff;
    box-shadow: 0 15px 50px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 25px 60px rgba(0,0,0,0.15);
}

.card i.fa-id-card {
    font-size: 60px;
    color: #dc3545;
}

.card h5 {
    margin-top: 1rem;
    font-weight: 700;
    color: #dc3545;
    font-size: 1.5rem;
}

.form-control:focus {
    border-color: #dc3545;
    box-shadow: 0 0 0 0.25rem rgba(220,53,69,0.25);
}

.btn-danger {
    background: linear-gradient(120deg, #dc3545, #e4606d);
    font-weight: 600;
    border-radius: 50px;
    transition: all 0.3s ease;
}

.btn-danger:hover {
    transform: scale(1.05);
    background: linear-gradient(120deg, #e4606d, #dc3545);
}

.alert-success {
    transition: opacity 0.5s ease;
}
</style>
</head>

<body>

<div class="card">

    <!-- Header -->
    <div class="text-center mb-4">
        <i class="fas fa-id-card"></i>
        <h5>ID Verification</h5>
        <p class="text-muted small mt-2">
            Please verify your identity to continue
        </p>
    </div>

    <!-- Django Messages -->
    {% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endfor %}
    {% endif %}

    <!-- Verification Form -->
<form id="verifyForm" method="POST" novalidate autocomplete="off">
        {% csrf_token %}

        <div class="form-floating mb-3">
            <input
                type="text"
                class="form-control"
                id="id_number"
                name="id_number"
                placeholder="ID Number"
                maxlength="13"
                required
            >
            <label for="id_number">South African ID Number</label>
            <div class="invalid-feedback">
                Please enter a valid 13-digit ID number.
            </div>
        </div>

        <div class="d-grid mb-3">
            <button type="submit" class="btn btn-danger btn-lg">
                Verify Identity
            </button>
        </div>

        <div class="alert alert-success mt-3 d-none text-center" id="successAlert">
            Identity verified successfully.
        </div>
    </form>

    <div class="text-center small text-muted mt-3">
        Secured and compliant with POPIA regulations
    </div>

</div>

<script>
const form = document.getElementById("verifyForm");
const idInput = document.getElementById("id_number");

form.addEventListener("submit", function (e) {
    const id = idInput.value.trim();

    if (id.length !== 13 || isNaN(id)) {
        e.preventDefault();
        idInput.classList.add("is-invalid");
        return;
    }

    idInput.classList.remove("is-invalid");
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>